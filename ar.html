<html>
    <header>
	    <meta name="apple-mobile-web-app-capable" content="yes">
        <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
		<!-- we import arjs version without NFT but with marker + location based support -->
		<script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
		<script src="https://raw.githack.com/fcor/arjs-gestures/master/dist/gestures.js"></script>
		<script src="https://rawgit.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
		<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet">
		<link href="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.0.0/magnific-popup.min.css" rel="stylesheet">
		<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.0.0/jquery.magnific-popup.min.js"></script>
		<script
      		type="application/javascript"
      		src="https://hammerjs.github.io/dist/hammer.min.js"
    	></script>
		
		
    </header>
	

    <body style="margin : 0px; overflow: hidden;" >	 
	  <!-- <p class="text-center mt-0" >
		<a href="version2.html" id="headerVideoLink" target="_blank" class="btn btn-outline-success">Version 3.3</a>
	  </p> -->
	 
	  
      <a-scene 
	    embedded 
		arjs = "sourceType: webcam; sourceWidth:1280; sourceHeight:960; displayWidth: 1280; displayHeight: 960;"
		renderer="antialias: true; logarithmicDepthBuffer: true; colorManagement: true; sortObjects: true;"
		vr-mode-ui="enabled: false"
		id="scene"
		gesture-detector
		loading-screen="dotsColor: black; backgroundColor: #6577B3"
	  >
	  <a-assets>
	    <a-asset-item
		  id="scene1"
		  src="scene.gltf"
		>
		<a-asset-item
		  id="scene2"
		  src="https://github.khronos.org/glTF-Sample-Viewer-Release/assets/models/2.0/DamagedHelmet/glTF/DamagedHelmet.gltf"
		>
		<video crossorigin="anonymous" id="promotional" loop="false" src="video.mp4" type="video/mp4" preload="auto"  playsinline>
		<img id="btn_start" src="button_start.png">
	  </a-assets>
	  <a-marker
	    type="pattern" 
		preset="custom" 
		url="pattern-marker.patt"
		raycaster="objects: #helmet-model3; near: 0; far: 50000;"
		emitevents="true"
		cursor="fuse: false; rayOrigin: mouse;"
		smooth="true" 
		smoothCount="20" 
		smoothTolerance="1.8" 
		smoothThreshold="10"
	  >
	    <a-text 
		  value="Tap on 3D model to play video" 
		  rotation="268 0 0" 
		  position="0 0 1" 
		></a-text>
		  <!-- <a-plane id="videoPlayer" material="src:#promotional" height="5" width="10" rotation="-90 0 0" position="0 0 4"></a-plane> -->
	    <a-video id="videoPlayer" src="#promotional" width="6" height="4" rotation="268 0 0" position="0 0 4"></a-video>
		<a-entity
		  clickhandler
		  id="helmet-model3"
		  gltf-model="#scene1"
		  position="0 0 0"
		  scale="0.08 0.08 0.08"
		  gesture-handler
        >
		</a-entity>
      </a-marker>
	  <a-entity camera></a-entity>
    </a-scene>
	
	<script>
		AFRAME.registerComponent('clickhandler', {
			init: function() {
				const btn = document.querySelector("#helmet-model3");
				var v = document.querySelector("#promotional")
				btn.addEventListener('click', () => {
					v.play();
				});		
		}});
	</script>
    </body>

</html>


